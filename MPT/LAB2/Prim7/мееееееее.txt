#include <ADuC812.inc>
NAME PROCEDURES
MAIN SEGMENT CODE
CSEG AT 0
USING 0
JMP START
RSEG MAIN

START:
MOV P3, #00000000b
CLR TF0
MOV TH0, #0h
MOV TL0, #0h
MOV TMOD, #1h
SETB TCON.4

loop1:
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,piu1
JMP loop2

piu1:
CJNE A,#11101110b,piu2
;MOV R1,A
MOV A,#00000001b
MOV P3,A
//MOV R0, #14 
MOV R2,#0
MOV R1, #3
pau1:
CJNE R2,#0,ch1
MOV R0,#14
ch1:
CJNE R2,#1,ch2
MOV R0,#3
ch2:
CJNE R2,#2,pau1_1
MOV R0,#1
pau1_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau1_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop1
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop1
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop1
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop1
MOV A,R3
DJNZ R1,pau1
INC R2
CJNE R2,#0,ch3
MOV R1,#3
ch3:
CJNE R2,#1,ch4
MOV R1,#15
ch4:
CJNE R2,#2,ch5
MOV R1,#30
ch5:
CJNE R2,#3,pau1
MOV R2,#0
MOV R1,#3
//MOV R0,#14
JMP pau1

loop1_1:
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,piu1
JMP loop2

piu2:
CJNE A,#11011110b,piu3
;MOV R1,A
MOV A,#00000011b
MOV P3,A
MOV R2,#0
MOV R1, #3
pau2:
CJNE R2,#0,ch6
MOV R0,#14
ch6:
CJNE R2,#1,ch7
MOV R0,#3
ch7:
CJNE R2,#2,pau2_1
MOV R0,#1
pau2_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau2_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop1_1
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop1_1
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop1_1
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop1_1
MOV A,R3
DJNZ R1,pau2
INC R2
CJNE R2,#0,ch8
MOV R1,#3
ch8:
CJNE R2,#1,ch9
MOV R1,#15
ch9:
CJNE R2,#2,ch10
MOV R1,#30
ch10:
CJNE R2,#3,pau2
MOV R2,#0
MOV R1,#3
//MOV R0,#14
JMP pau2

loop1_2:
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,piu3
JMP loop2

piu3:
CJNE A,#10111110b,loop2
;MOV R1,A
MOV A,#00000111b
MOV P3,A
MOV R2,#0
MOV R1, #3
pau3:
CJNE R2,#0,ch11
MOV R0,#14
ch11:
CJNE R2,#1,ch12
MOV R0,#3
ch12:
CJNE R2,#2,pau3_1
MOV R0,#1
pau3_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau3_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop1_2
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop1_2
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop1_2
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop1_2
MOV A,R3
DJNZ R1,pau3
INC R2
CJNE R2,#0,ch13
MOV R1,#3
ch13:
CJNE R2,#1,ch14
MOV R1,#15
ch14:
CJNE R2,#2,ch15
MOV R1,#30
ch15:
CJNE R2,#3,pau3
MOV R2,#0
MOV R1,#3
JMP pau3

loop2:
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,piu4
JMP loop3

piu4:
CJNE A,#11101101b,piu5
;MOV R1,A
MOV A,#00001111b
MOV P3,A
MOV R2,#0
MOV R1, #3
pau4:
CJNE R2,#0,ch16
MOV R0,#14
ch16:
CJNE R2,#1,ch17
MOV R0,#3
ch17:
CJNE R2,#2,pau4_1
MOV R0,#1
pau4_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau4_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop2
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop2
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop2
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop2
MOV A,R3
DJNZ R1,pau4
INC R2
CJNE R2,#0,ch18
MOV R1,#3
ch18:
CJNE R2,#1,ch19
MOV R1,#15
ch19:
CJNE R2,#2,ch20
MOV R1,#30
ch20:
CJNE R2,#3,pau4
MOV R2,#0
MOV R1,#3
JMP pau4

loop2_1:
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,piu4
JMP loop3

piu5:
CJNE A,#11011101b,piu6
;MOV R1,A
MOV A,#00011111b
MOV P3,A
MOV R2,#0
MOV R1, #3
pau5:
CJNE R2,#0,ch21
MOV R0,#14
ch21:
CJNE R2,#1,ch22
MOV R0,#3
ch22:
CJNE R2,#2,pau5_1
MOV R0,#1
pau5_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau5_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop2_1
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop2_1
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop2_1
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop2_1
MOV A,R3
DJNZ R1,pau5
INC R2
CJNE R2,#0,ch23
MOV R1,#3
ch23:
CJNE R2,#1,ch24
MOV R1,#15
ch24:
CJNE R2,#2,ch25
MOV R1,#30
ch25:
CJNE R2,#3,pau5
MOV R2,#0
MOV R1,#3
JMP pau5

loop2_2:
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,piu6
JMP loop3

piu6:
CJNE A,#10111101b,loop3
;MOV R1,A
MOV A,#00111111b
MOV P3,A
MOV R2,#0
MOV R1, #3
pau6:
CJNE R2,#0,ch26
MOV R0,#14
ch26:
CJNE R2,#1,ch27
MOV R0,#3
ch27:
CJNE R2,#2,pau6_1
MOV R0,#1
pau6_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau6_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop2_2
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop2_2
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop2_2
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop2_2
MOV A,R3
DJNZ R1,pau6
INC R2
CJNE R2,#0,ch28
MOV R1,#3
ch28:
CJNE R2,#1,ch29
MOV R1,#15
ch29:
CJNE R2,#2,ch30
MOV R1,#30
ch30:
CJNE R2,#3,pau6
MOV R2,#0
MOV R1,#3
JMP pau6

loop3:
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,piu7
JMP loop4

piu7:
CJNE A,#11101011b,piu8
;MOV R1,A
MOV A,#01111111b
MOV P3,A
MOV R2,#0
MOV R1, #3
pau7:
CJNE R2,#0,ch31
MOV R0,#14
ch31:
CJNE R2,#1,ch32
MOV R0,#3
ch32:
CJNE R2,#2,pau7_1
MOV R0,#1
pau7_1:
JNB TCON.5, $
CLR TCON.5
DJNZ R0, pau7_1
RL A
MOV P3,A
MOV R3,A
;MOV R0, #1
MOV A,#11111110b
MOV P2,A
MOV A,P2
CJNE A,#11111110b,loop3
MOV A,#11111101b
MOV P2,A
MOV A,P2
CJNE A,#11111101b,loop3
MOV A,#11111011b
MOV P2,A
MOV A,P2
CJNE A,#11111011b,loop3
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,loop3
MOV A,R3
DJNZ R1,pau7
INC R2
CJNE R2,#0,ch33
MOV R1,#3
ch33:
CJNE R2,#1,ch34
MOV R1,#15
ch34:
CJNE R2,#2,ch35
MOV R1,#30
ch35:
CJNE R2,#3,pau7
MOV R2,#0
MOV R1,#3
JMP pau7

piu8:
CJNE A,#11011011b,piu9
MOV A,#11111111b
MOV P3,A
JMP loop3

piu9:
CJNE A,#11011011b,loop4
MOV A,#11111111b
MOV P3,A
JMP loop3

loop4:
MOV A,#11110111b
MOV P2,A
MOV A,P2
CJNE A,#11110111b,piu0
JMP loop1

piu0:
;CJNE A,#11010111b,loop
MOV A,#0b
MOV P3,A
JMP loop1

END